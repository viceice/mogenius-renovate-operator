# -- override the fullname of created resources
fullnameOverride: ""

# -- number of operator replicas. Leader election is enabled automatically when > 1
replicaCount: 1

crd:
  # -- whether to install the CRD or not, set to false if you want to install the CRD separately
  install: true
  image:
    registry: registry.k8s.io
    repository: kubectl
    tag: v1.35.0
    pullPolicy: "IfNotPresent"
    # -- imagePullSecrets for the operator pod
    imagePullSecrets: []

image:
  registry: ghcr.io
  repository: mogenius/renovate-operator
  # -- tag of the renovate-operator, if empty .Chart.AppVersion is used
  tag: ~
  pullPolicy: "IfNotPresent"
  # -- imagePullSecrets for the operator pod
  imagePullSecrets: []

deployment:
  # -- additional annotations for the operator deployment
  annotations: {}
  # -- additional labels for the operator deployment
  labels: {}
  # -- additional labels for the operator pods
  podLabels: {}
  # -- additional annotations for the operator pods
  podAnnotations: {}
  # -- revision history limit for the operator deployment
  revisionHistoryLimit: 10

config:
  # -- default backoff limit for renovate jobs
  defaultJobBackoffLimit: 1
  # -- default active deadline seconds for renovate jobs
  defaultJobActiveDeadlineSeconds: 1800
  # -- whether to delete successfully finished renovate jobs (will lose logs)
  deleteSuccessfulJobs: false
  # -- TTL for finished renovate jobs in seconds, -1 means they are kept forever
  jobTTLSecondsAfterFinished: -1

ingress:
  # -- whether to enable the ingress renovate-operator
  enabled: false
  # -- the ingressclassname for the ingress, default: nginx
  ingressClassName: "nginx"
  # -- the host the ingress should listen for
  host: ~
  # -- tls configuration to be applied on the ingress
  tls: []
    # - hosts:
    #     - renovate.example.com
    #   secretName: renovate-tls
  # -- labels to place on the ingress
  labels: {}
  # -- annotations to place on the ingress
  annotations: {}

# -- HTTPRoute for the operator web ui
route:
  # -- whether to enable the HTTPRoute
  enabled: false
  # -- annotations to place on the HTTPRoute
  annotations: {}
  # -- labels to place on the HTTPRoute
  labels: {}
  # -- hostnames to place on the HTTPRoute
  hostnames: []
  # -- parentRefs to place on the HTTPRoute
  parentRefs: []

webhook:
  enabled: false
  port: 8082
  ingress:
    # -- whether to enable the ingress for the webhook server
    enabled: false
    # -- the ingressclassname for the ingress, default: nginx
    ingressClassName: "nginx"
    # -- the host the ingress should lsiten for
    host: ~
    # -- tls configuration to be applied on the ingress
    tls: []
      # - hosts:
      #     - webhook.renovate.example.com
      #   secretName: webhook-renovate-tls
    # -- labels to place on the ingress
    labels: {}
    # -- annotations to place on the ingress
    annotations: {}
  # -- HTTPRoute for the webhook server
  route:
    # -- whether to enable the HTTPRoute
    enabled: false
    # -- annotations to place on the HTTPRoute
    annotations: {}
    # -- labels to place on the HTTPRoute
    labels: {}
    # -- hostnames to place on the HTTPRoute
    hostnames: []
    # -- parentRefs to place on the HTTPRoute
    parentRefs: []


rbac:
  # -- if true no clusterrole and clusterrolebinding will be created, only role and rolebinding
  # -- when enabled, the operator will only watch resources in the namespace it is deployed to
  ownNamespaceOnly: false
  # -- optional: specify a custom namespace to watch (defaults to the release namespace when ownNamespaceOnly is true)
  watchNamespace: ""

# -- security context for the pod and containers
securityContext:
  pod:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  container:
    runAsUser: 1000
    runAsGroup: 1000
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
    readOnlyRootFilesystem: true
    privileged: false
    allowPrivilegeEscalation: false

# -- resources for the operator pod
resources: {}
# -- extra environment variables for the operator container
extraEnv: []
# -- nodeSelector for the operator pod
nodeSelector: {}
# -- tolerations for the operator pod
tolerations: []
# -- affinity for the operator pod
affinity: {}
# -- topologySpreadConstraints for the operator pod
topologySpreadConstraints: []

serviceAccount:
  # -- name of the serviceaccount, if not set a name is generated using the fullname template
  name: ~
  # -- whether a serviceaccount should be created
  create: true
  # -- annotations to add to the serviceaccount
  annotations: {}
  # -- labels to add to the serviceaccount
  labels: {}

logging:
  # -- log level for the operator, one of 'debug', 'info', 'error', 'panic'or any integer value > 0
  level: "info"
  # -- log format for the operator, one of: json, console
  format: "json" 

metrics:
  enabled: false
  serviceMonitor:
    # -- whether to create a ServiceMonitor for the operator metrics
    enabled: false
    # -- scrape interval for the ServiceMonitor, defaults to Prometheus global scrape interval
    interval: ~
  dashboard:
    # -- whether to create a Grafana dashboard for the operator metrics
    enabled: false
    annotations: {}
    labels:
      grafana_dashboard: "1"
    # -- namespace to create the dashboard in, defaults to the release namespace
    namespace: ~
